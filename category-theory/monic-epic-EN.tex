\documentclass{article}

\usepackage[utf8]{inputenc}
\usepackage{t1enc}

\usepackage{proof}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

\usepackage{BOONDOX-calo}
\newcommand{\obSet}{\ob_{\setCat}}
\newcommand{\ob}{\mathsf{Ob}}
\newcommand{\setCat}{\mathbf{Set}}

\newcommand{\parenth}[1]{\left(#1\right)}
\newcommand{\setOf}[1]{\left\lbrace\,#1\,\right\rbrace}
\newcommand{\setAbs}[2]{\left\lbrace\,\,#1\,\middle|\,\,#2\,\right\rbrace}
%\newcommand{\specialSetAbs}[2]{\left\lbrace\,\,#1\,\middle|\,\,#2\,\right\rbrace}

\usepackage{stmaryrd}
%\usepackage{stix}

\theoremstyle{definition}
\newtheorem{thm}{Theorem}
\newtheorem{sth}{Subtheorem}[thm]
\newtheorem{ntn}{Notation}
\newtheorem{dfn}{Definition}
\newtheorem{sdf}{Supplementary definition}[ntn]
\renewcommand{\qedsymbol}{\textbf{Q.E.D.} $\blacksquare$}

\usepackage{comment}
\usepackage{changepage}

\title{My draft practicings in intuitionistic logic,\\+ first baby steps in learning category theory}
\author{Endrey MÃ¡rk}

\begin{document}
	\maketitle
	\begin{comment}
		\[
			\infer[(\lor E)_{a,b}]{C}{
				A\lor B&
				%\infer[a]A{}&
				%\infer[b]B{}
				\infer*C{
					\infer[a]A{}
				}&
				\infer*C{
					\infer[b]B{}
				}
			}
		\]
	\end{comment}
	The main point of this small personal practice draft is to to prove a simple introductory category theoretic theorem in the Gentzen-style natural deduction system, thus, in a pure formal way, without common-sense argumentation.

	For the beginning, two ,,fabricated'' notations and concepts will be introduced for the sake of conciseness and disambiguity:

	\begin{ntn}[Pre- vs suffix function writing style compositions]
		Instead of the usual $\circ$ notation of composition, I will use two custom, ,,fabricated'' notations for disambiguity's sake:
		\begin{align}
			\parenth{f \ogreaterthan g}x &:= g\parenth{fx}\\
			\parenth{f \olessthan g}x &:= f\parenth{gx}
		\end{align}
		Thus, $\ogreaterthan$ is meant as the ,,pipeline-oder''/,,semicolon-order'' notation or the ,,suffix-function-writing style composition'', and $\olessthan$ as the ,,prefix-function-writing style composition'' notation. Usually I will use $\ogreaterthan$.
	\end{ntn}

	The above ,,disambiguation forking'' of the notations for compsition make a need to ,,rebuild'' also an algebraic concept:

	\begin{dfn}[Pre- and postcancellability, epimorphisms and monomorphisms]
		The usual terms ,,\emph{left cancellability}'' and ,,\emph{right cancellability}'' are ambigous if it is not fixed whether they are meant on $\ogreaterthan$ or $\ogreaterthan$, because ,,left cancellability'' on $\ogreaterthan$ is right-cancellability on $\ogreaterthan$, and vice versa. In order to ensure disambiguity in a quick and concise way, the following fabricated terms will be used:
		\begin{description}
			\item[Pre-cancellability:] The morphism $e$ has the \emph{pre-cancellation property} (i.e. it is \emph{pre-cancellable}), iff it is left-cancellable on $\ogreaterthan$. An equivalent definition: iff it is right-cancellable on $\olessthan$.

			In details: the morphism $e$ is pre-cancellable, iff for all (after-composable) $f_1$, $f_2$ morphisms
			\begin{align}
				e \ogreaterthan f_1 = e \ogreaterthan f_2 \to f_1 = f_2,\\\intertext{or, expressed in an equivalent way,}
				f_1 \olessthan e = f_2 \olessthan e \to f_1 = f_2
			\end{align}
			The morphism $e$ having this property is called also being ,,\emph{epic}'', or being an ,,\emph{epimorphism}''.
			\item[Post-cancellability:]  The morphism $m$ has the \emph{post-cancellation property} (i.e. it is \emph{post-cancellable}), iff it is right-cancellable on $\ogreaterthan$. An equivalent definition: iff it is left-cancellable on $\olessthan$.

			In details:  the morphism $m$ is post-cancellable, iff for all (before-composable) $f_1$, $f_2$ morphisms
			\begin{align}
				f_1 \ogreaterthan m = f_2 \ogreaterthan m \to f_1 = f_2,\\\intertext{or, in an equivalent way,}
				m \olessthan f_1 = m \olessthan f_2 \to f_1 = f_2
			\end{align}
			The morphism $m$ having this property is called also being ,,\emph{monic}'', or being a ,,\emph{monomorphism}''.
		\end{description}
		Summary in short
		\begin{itemize}
			\item ,,Pre-cancellability'' is left-cancellability on $\ogreaterthan$, right-cancellability on $\olessthan$.
			\item ,,Post-cancellability'' is right-cancellability on $\ogreaterthan$, left-cancellability on $\olessthan$.
			\item Pre-cancellable morphisms are called ,,epimorphisms'' by definition.
			\item Post-cancellable morphisms are called ,,monomorphisms'' by definition.
		\end{itemize}
	\end{dfn}
	\begin{thm}[Surjection---epimorphism coincidence in $\setCat$ category]
		In the category of sets, the purely category theoretical property of \emph{pre-cancellativity} property exactly coincides with notion of surjectivity for sets and functions.
		Thus, the pre-cancellative morphisms (so called ,,\emph{epimorphisms}'') are exactly the surjective functions in $\mathbf{Set}$.
	\end{thm}
	\begin{proof}
		See the following two subtheorems (for the two directions).
		One of the directions is easier, for two reasons. First, its proof stays inside the realm of intuitinostic rules of logic (no need for the addtional rules beyond that, like reduction ad absurdum). Second, the other direction not only needs the full power of classical logic (including reductio ad absurdum), but also it needs the construction of two specific terms.

		So let us begin with the easier direction.
	\end{proof}
	\begin{sth}[Surjections are epimorphisms in $\setCat$]
		The direction of ,,surjective functions are epimorphisms (because having the pre-cancellation property)''.

		Let $s$ be a surjective function:\[\forall y \exists x \bullet sx = y\]should hold.
		We clam that using the surjectivity of $s$, we have to be able to deduce that $s$ holds the pre-cancellability property for composition --- i.e. $s$ has the category theoretic property of \emph{beging an epimorphism}, in notation, it means that for arbitrary $f_1$, $f_2$ functions (where both $f_1$ and $f_2$ are post-composable after $s$),
		\[s\ogreaterthan f_1 = s\ogreaterthan f_2 \to f_1 = f_2.\]

		Summarizing all above, in pure notations: a deduction like this below
		\[
			\infer*{
				\infer[(\text{Def})]{
					\text{$s$ is pre-cancellative (it is an epimorphism)}
				}{
					s\ogreaterthan f_1 = s\ogreaterthan f_2 \to f_1 = f_2
				}
			}{
				\infer[(\text{Def})]{
					\forall y \exists x \bullet sx = y
				}{
					\text{$s$ is a surjective function in $\setCat$ category}
				}
			}
		\]
		must be construable.
	\end{sth}
	\begin{proof}
		\begin{adjustwidth}{-100pt}{0pt}
			\[
				\infer[(\to I)_b]{
					\infer[(\text{Def}_{\text{canc}})]{
						\text{$s$ is pre-cancellative (it is an epimorphism)}
					}{
						s\ogreaterthan f_1 = s\ogreaterthan f_2 \to f_1 = f_2
					}
				}{
					\infer[(\text{func.ext.eq.})]{
						f_1 = f_2
					}{
						\infer[(\forall I)]{
							\forall y \bullet f_1 y = f_2 y
						}{
							\infer[(\exists E)_a]{
								f_1 y = f_2 y
							}{
								\infer[(\forall E)]{
									\exists x \bullet sx = y
								}{
									\infer[(\text{Def}_{\text{surj}})]{
										\forall y \exists x \bullet sx = y
									}{
										\text{$s$ is a surjective function in $\setCat$ category}
									}
								}
								&
								\infer[(\text{$=$ is compatible with both $f_1$ and $f_2$})]{
									f_1 y = f_2 y
								}{
									\infer[a]{sx = y}{}
									&
									\infer[(\forall E)]{
										f_1(sx) = f_2(sx)
									}{
										\infer[(\text{Def}_{\text{$\ogreaterthan$ and func.eq.ext.}})]{
											\forall x \bullet f_1(sx) = f_2(sx)
										}{
											\infer[b]{
												s\ogreaterthan f_1 = s\ogreaterthan f_2
											}{}
										}
									}
								}
							}
						}
					}
				}
			\]
		\end{adjustwidth}
	\end{proof}

	Now let us proceed with the other, with the opposite, with the harder direction:

	\begin{sth}[Epimorphisms are surjections in $\setCat$]

		In notations: Let $X, Y \in \obSet, e: X \to Y$. Then
		\[
			\infer*{
				\forall y \in Y \bullet \exists x \in X \bullet ex = y
			}
			{
				\forall Z \in \obSet \bullet \forall f_1, f_2: Y \to Z \bullet e\ogreaterthan f_1 = e\ogreaterthan f_2 \to f_1 = f_2
			}
		\]
		We simplify the theorem, abandon the ,,typings'', make it ,,typeless'':
		\[
			\infer*{
				\forall y \exists x \bullet ex = y
			}
			{
				\forall f_1, f_2 \bullet e\ogreaterthan f_1 = e\ogreaterthan f_2 \to f_1 = f_2
			}
		\]
		I couldn't prove it inside intuitionistic logic. But I can prove it by reductio ad absurdum. This argumentation is beyond ituitionistic logic.
		But after I accept the this step, the remainding steps are well deducible while staying inside the realm of intuitionistic logic.
		Now we proceed from the \emph{negation} of the original conclusion towards the \emph{negation} of the original premise:
		\[
			\infer*{
				\exists f_1, f_2 \bullet f_1 \neq f_2 \land e\ogreaterthan f_1 = e\ogreaterthan f_2
			}
			{
				\exists y_0 \forall x \bullet ex \neq y_0
			}
		\]
	\end{sth}
	\begin{proof}
		As a kind of ,,conservative extension'' of our logic language, we introduce  the following ,,syntactic sugar'' with the following terms:
		\begin{align}
			\mathcal Z    &:\equiv \setOf{0, +1, -1},\\
			\mathcal{f_1} &:\equiv \setAbs{y \mapsto \left\langle\begin{array}{lr}+1,&\text{if $y=y_0$}\\0,&\text{if $y\neq y_0$}\end{array}\right. \in Y\times\mathcal Z}{y\in Y},\\
			\mathcal{f_2} &:\equiv \setAbs{y \mapsto \left\langle\begin{array}{lr}-1,&\text{if $y=y_0$}\\0,&\text{if $y\neq y_0$}\end{array}\right. \in Y\times\mathcal Z}{y\in Y}.
		\end{align}
		We will use the new terms $\mathcal{f_1}$ and $\mathcal{f_1}$ in the deduction tree:
		\begin{adjustwidth}{-130pt}{0pt}
			\[
				\infer[\parenth{\exists I}]{
					%\exists Z \in \obSet \bullet \exists f_1, f_2: Y \to Z \bullet f_1 \neq f_2 \land e\ogreaterthan f_1 = e\ogreaterthan f_2
					\exists f_1 \neq f_2 \bullet e\ogreaterthan f_1 = e\ogreaterthan f_2
				}
				{
					\infer[(\exists E)_a]{
						\mathcal{f_1} \neq \mathcal{f_2} \land e\ogreaterthan \mathcal{f_1} = e\ogreaterthan \mathcal{f_2}
					}{
						\exists y_0 \bullet \forall x \bullet ex \neq y_0
						&
						\infer[(\land I)]{
							\mathcal{f_1} \neq \mathcal{f_2} \land e\ogreaterthan \mathcal{f_1} = e\ogreaterthan \mathcal{f_2}
						}{
							\infer[(\text{func.ext.eq.})]{
								\mathcal{f_1} \neq \mathcal{f_2}
							}{
								\infer[(\exists I)]{
									\exists y \bullet \mathcal{f_1}y \neq \mathcal{f_2}y
								}{
									\infer[(\text{Compat}_=\text{ with }\neq)]{
										\mathcal{f_1}y_0 \neq \mathcal{f_2}y_0
									}{
										\infer[(\text{Def}_{\mathcal{f_1}})]{\mathcal{f_1}y_0 = +1}{}
										&
										\infer[(\text{Def}_{\mathcal{f_2}})]{\mathcal{f_2}y_0 = -1}{}
									}
								}
							}
							&
							\infer[(\text{Def}_{\ogreaterthan}, \text{func.ext.eq.})]{
								e\ogreaterthan \mathcal{f_1} = e\ogreaterthan \mathcal{f_2}
							}{
								\infer[(\forall I)]{
									%\forall x \in X \bullet \mathcal{f_1(ex)} = \mathcal{f_2(ex)}
									\forall x \bullet \mathcal{f_1(ex)} = \mathcal{f_2(ex)}
								}{
									\infer[(\text{Transit}_=, \text{Commut}_=)]{
										\mathcal{f_1}(ex) = \mathcal{f_2}(ex)
									}{
										\infer[(\text{Def}_{\mathcal{f_1}})]{
											\mathcal{f_1}(ex) = 0
										}{
											\infer[(\forall E)]{
												ex \neq y_0
											}{
												\infer[a]{
													\forall x \bullet ex \neq y_0
												}{}
											}
										}
										&
										\infer[(\text{Def}_{\mathcal{f_1}})]{
											\mathcal{f_2}(ex) = 0
										}{
											\infer[(\forall E)]{
												ex \neq y_0
											}{
												\infer[a]{
													\forall x \bullet ex \neq y_0
												}{}
											}
										}
									}
								}
							}
						}
					}
				}
			\]%x \in X \to \mathcal{f_1}\parenth{ex} = 0 \land \mathcal{f_2}\parenth{ex} = 0
		\end{adjustwidth}
	\end{proof}
	\begin{comment}
		\infer[\parenth{\forall I}]{
			\forall x \in X \bullet \mathcal{f_1}\parenth{ex} = \mathcal{f_2}\parenth{ex}
		}{
			\infer[\parenth{\to I}_a]{
				x \in X \to \mathcal{f_1}\parenth{ex} = \mathcal{f_2}\parenth{ex}
			}{
				\infer{
					\mathcal{f_1}\parenth{ex} = \mathcal{f_2}\parenth{ex}
				}{
					\infer[a]{x \in X}{}
				}
			}
		}
	\end{comment}
\end{document}
